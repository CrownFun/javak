<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>KAFKA</title>
<meta name="description" content="A description of your website">
<meta name="keywords" content="keyword1, keyword2, keyword3">
<link href="css/style.css" rel="stylesheet" type="text/css">
</head>
<body>

<div id="wrapper"> 

  <div id="header"> 

    <div class="top_banner">
      <h1>KAFKA</h1>
    </div>
 
  </div>

  <div id="page_content">
  
<!--Template designed by--><a href="http://www.htmltemplates.net"><img src="images/copyright.gif" class="copyright" alt="http://www.htmltemplates.net"></a>
    
	<div class="navigation">
      <ul>
        <li><a href="index.html">Home</a></li>
      </ul>
    </div>

    <div class="left_side_bar"> 

      <div class="col_1">
        <h1>Main Menu</h1>
        <div class="box">
         <ul>
             <li><a href="java/java.html">JAVA</a></li>
            <li><a href="git.html">GIT</a></li>
            <li><a href="spring.html">SPRING</a></li>
            <li><a href="rest.html">REST</a></li>
            <li><a href="rest-api-test.html">REST API TEST</a></li>
            <li><a href="graphql.html">GRAPHQL</a></li>
            <li><a href="spock-mockito.html">SPOCK/MOCKITO</a></li>
            <li><a href="kafka.html">KAFKA</a></li>
            <li><a href="docker.html">DOCKER</a></li>
            <li><a href="docker-compose.html">DOCKER-COMPOSE</a></li>
            <li><a href="kubernetes.html">KUBERNETES</a></li>
			<li><a href="microservice.html">MICROSERVICE</a></li> 
            <li><a href="swagger.html">SWAGGER</a></li>
			<li><a href="jenkins.html">JENKINS</a></li>
			<li><a href="dependency.html">ZALEŻNOŚCI</a></li>
			<li><a href="useful.html">PRZYDATNE ADNOTACJE</a></li> 
          </ul>
        </div>
      </div>
      
      <div class="col_1">
        <h1>Dodatkowe Informacje</h1>
        <div class="box">
 	     <p>Przykład projektu:</p>
			<a href="https://github.com/CrownFun/kafka-simple">spring-kafka-app (String)</a><br>
			<a href="https://github.com/CrownFun/kafka-advance">message-conversion-json</a><br>
			<a href="https://dev.to/thegroo/spring-kafka-producer-and-consumer-41oc">Simple Kafka</a>
			<a href="https://codenotfound.com/spring-kafka-json-serializer-deserializer-example.html">Advanced Kafka</a>
			<a href = "https://start.spring.io/">Spring Boot Initializer</a><br>
			
        </div>
      </div>
</div>
    <div class="right_section">
           <div class="common_content">
		  	  <div class ="links">
		  <p>Przydatne linki:</p>
		  <a href = "http://dzikowski.github.io/2014/12/07/kafka/">dzikowski.github.pl</a><br> 
				  <a href="https://www.javainuse.com/misc/apache-kafka-hello-world">start with kafka</a>
				  <a href="https://medium.com/@jhansireddy007/how-to-parallelise-kafka-consumers-59c8b0bbc37a">GroupId</a>
		
		  </div>
        <img src="images/kafka.png" width="220" height="150">
        <hr>
	  <h4><b>Informacje ogólne</b></h4>
<p><b>Apache Kafka</b> to tak zwany <b>message broker</b>. Tego rodzaju aplikacje odpowiadają za odbieranie, walidację, ewentualne przekształcenia i rozsyłanie
	komunikatów pomiędzy aplikacjami. Umożliwiają bardzo elastyczny sposób komunikowania się luźno ze sobą powiązanych elementów systemów informatycznych.</p><br>
	<p>Cechą charakterystyczną Kafki jest jej niezawodność, wydajność i zdolność do pracy w środowisku rozproszonym. Kiedy zespół <b>LinkedIn</b> tworzył Kafkę, 
 ich główną motywacją było poradzenie sobie z przetwarzaniem w czasie rzeczywistym ogromnej ilości zdarzeń. W 2014 roku w LinkedIn komunikacja za pośrednictwem Kafki
przebiegała zarówno pomiędzy klastrami, jak i centrami danych. W sumie przesyłano około 200 miliardów komunikatów dzienne, osiągając 7 milionów komunikatów na sekundę!</p><br>
	<p>Kafka umożliwia przesyłanie komunikatów (ang. <b>message</b>) pomiędzy aplikacjami w systemach rozproszonych. Nadawca może przesyłać komunikaty do Kafki,
 natomiast odbiorca pobiera wiadomości ze strumienia publikowanego przez Kafkę.</p><br>
 <p>Komunikaty pogrupowane są w tzw. tematy (ang. <b>topic</b>). Zarówno nadawca, jak i odbiorca powiązany jest z jednym tematem. Nadawca przesyła komunikaty
	  z określonego tematu, a odbiorca otrzymuje za pośrednictwem Kafki wszystkie komunikaty z określonego tematu, które mogą pochodzić nawet od wielu nadawców. 
			Każdy wysłany przez dowolnego nadawcę komunikat z danego tematu trafi do każdego odbiorcy, który nasłuchuje tego tematu.</p>
			   <img src="images/kafka2.svg " width="500" height="300">
			   <p>Kafka jest uruchamiana na wielu serwerach, podobnie jak rejestry komunikatów z danego tematu są przechowywane i replikowane na wielu maszynach jednocześnie.
				   Pojedynczy serwer – instancja Kafki to tzw. broker (ang. <b>broker</b>)</p><br>
			   <p>Komunikaty z danego tematu dopisywane są do tzw. partycji (ang. <b>partition</b>). Partycja to pewien rejestr, uporządkowana sekwencja komunikatów, która nie zmienia się,
				   oprócz tego, że nowe komunikaty mogą zostać dopisane na koniec tej sekwencji, a stare – na przykład starsze niż dwa dni – są zapominane. 
				   Aby pobrać odpowiednią sekwencję komunikatów, odbiorcy muszą jedynie znać swoją pozycję w rejestrze – indeks ostatnio odczytanego komunikatu.</p><br>
			   <p>partycje Kafki są replikowane, to znaczy, że ich kopie mogą znajdować się na wielu serwerach. Dla każdej partycji istnieje jeden serwer, 
				   który jest tzw. liderem (ang. leader) i który obsługuje wszystkie operacje odczytu i zapisu danej partycji. 
				   Dla każdej partycji mogą istnieć także serwery (ang. followers), który jedynie kopiują dane od lidera.
				   Jeśli na przykład ustawisz współczynnik replikacji na 3, to znaczy, że każda partycja będzie miała jednego lidera i 2 serwery (dwóch brokerów),
				   którzy jedynie kopiują dane, zwiększając tym samym bezpieczeństwo klastra na awarie.</p><br>
			   
			   <p>Wazne punkty:</p><br>
			   
			   <ol>
				   <li>Każda partycja związana jest tylko z jednym tematem.</li>
				   <li>Rejestr komunikatów z danego tematu może być rozbity na wiele partycji.</li>
				   <li>Każda partycja musi zmieścić się na pojedynczej instancji Kafki (pojedynczym brokerze).</li>
				   <li>Partycja może być replikowana.</li>
				   <li>Większa liczba partycji pozwala na zwiększenie wydajności operacji odczytu i zapisu komunikatów.</li>
				   <li>Większy współczynnik replikacji pozwala na zwiększenie bezpieczeństwa danych (na zwiększenie odporności klastra na awarie).</li>
				   </ol><br>
			   <p>Poniżej pokazuję jeszcze na rysunku przykład działania klastra Kafki składającego się z trzech brokerów: B1, B2, B3. 
				   W tym przykładzie dla każdego tematu tworzona jest jedna partycja – stąd też w sumie są dwie partycje A i B,
				   odpowiadające tematom A i B. Współczynnik replikacji został ustawiony na poziomie 2, to znaczy, że każda partycja pojawia się na dwóch serwerach.</p>
			   <img src="images/kafka3.svg" width="500" height="300">
			   <p>Broker B2 jest liderem dla tematu A, to znaczy, że w rzeczywistości to on jest odpowiedzialny za wszystkie operacje zapisu i odczytu do partycji A.
				   Partycje na instancjach kafki B1 i B3 są jedynie kopiami. Analogicznie broker B1 jest liderem dla tematu B, a partycje A na B2 i B3,
				   zawierają kopie danych z partycji na B1</p><br>
			   
			   <p>W środowisku rozproszonym bardzo ważna jest odporność na awarie. System rozproszony, działający na wielu urządzeniach jednocześnie, 
				   powinien pracować bez zakłóceń nawet wtedy, gdy kilka serwerów przestanie działać.

Dodatkowo można mówić o gwarancjach dotyczących sposobu dostarczania komunikatów. Rozróżnia się trzy rodzaje takich gwarancji:</p><br>
			   <ul>
				   <li><b>Co najwyżej raz</b> – komunikaty mogą zostać utracone, ale na pewno nie dojdzie do sytuacji, kiedy komuniat zostanie dostarczony wielokrotnie.</li>
				   <li><b>Przynajmniej raz</b> – komunikat może zostać odebrany ponownie, ale za to żaden nie zostanie utracony.</li>
				   <li><b>Dokładnie jeden raz</b> – każdy komunikat jest dostarczony jeden raz do odbiorcy.</li>
			   </ul><br>
			   <p>Kafka domyślnie gwarantuje dostarczenie komunikatu przynajmniej raz, ale możliwe jest takie jej skonfigurowanie, by, 
				   przy odpowiedniej implementacji 
				   nadawców i odbiorców,umożliwić gwarancję dostarczenia co najwyżej raz, albo dokładnie jeden raz.
				   Niesie to ze sobą jednak określone koszty, związane z wydajnością.</p><br>
			   
			   <p><b><a href="https://medium.com/@jhansireddy007/how-to-parallelise-kafka-consumers-59c8b0bbc37a">GrupId</a></b> - służy do grupowania konsumerów,
				   zapewnia sytuację w której <b>wiadomość jest dostarczana tylko do jednego consumera w danej grupie</b>. Ilustracja poniżej:
				   			   </p>
			   <img src="images/kafka4.png"  width="500" height="350" >
			  <p> As shown in the diagram, Kafka would assign:</p>
			   <ul>
		<li>partition-1 and partition-2 to consumer-A</li>
		<li>partition-3 and partition-4 to consumer-B</li>
			   </ul>
		<p>This means, the same data wouldn’t consumed by the consumers within the same group.</p>
			   <hr>
			   <h4><b>Instalacja</b></h4>
			   <p>Aby korzystać z kafki należy ją pobrać ze strony(wersja 2.13-2.4.0) <a href="https://kafka.apache.org/downloads.html">apache kafka</a> rozpakowac i uruchomić 
			   terminal w folderze gdzie zainstalwoana jest kafka</p><br>
			   
			   <p>najpierw należy uruchomić <b>Zookeper</b>:<br><b> C:\kafka_2.12-0.10.2.1>
.\bin\windows\zookeeper-server-start.bat .\config\zookeeper.properties </b><p><br>
			   <p>Nastepnie kafka:<br><b> C:\kafka_2.12-0.10.2.1>
.\bin\windows\kafka-server-start.bat .\config\server.properties</b></p>

		
		<p>Od tej pory kafka nasłuchuje. Komunikaty można przesłać przez terminal w jednym oknie i odbierac w drugim lub z wykorzystaniem Javy</p>
		<hr>
			<h4><b>Kafka w Javie</b></h4>	   
	
				  
	<p>-Dodać zalezność <a href="https://github.com/CrownFun/kafka-simple/blob/master/pom.xml">spring-kafka</a> do projektu. - można użyć <b>Spring initializer</b>.</p>
	<p>-Utworzyć <b>Producera</b> wykorzytsując do tego <b>Kafka Template</b></p> 
	 <p>Utworzyć <b>Consumera</b> - należy uzyć adnotacji <b>@KafkaListener</b> nad metodą</p>
	  
	 <p>Do przesyłania własnych obiektów należy dodatkowo dodać konfigurację do 
		<a href="https://github.com/CrownFun/kafka-advance/blob/develop/src/main/java/com/memorynotfound/kafka/consumer/FooListenerConfig.java">serializacji</a> 
		 obiektów</p><br>
      <h2>Do ogarnięcia Kafka Streams i Acknowledgment <a href="https://medium.com/@stephane.maarek/the-kafka-api-battle-producer-vs-consumer-vs-kafka-connect-vs-kafka-streams-vs-ksql-ef584274c1e">API Battle</a></h2>
		
		
		</div>
      
    </div>

    <div class="clear"></div>
    
    <!--start footer from here-->
    <div id="footer">Copyright &copy; 2014. Design by <a href="http://www.htmltemplates.net" target="_blank">htmltemplates.net</a><br>
    
    </div>
	
  </div>
</div>

</body></html>